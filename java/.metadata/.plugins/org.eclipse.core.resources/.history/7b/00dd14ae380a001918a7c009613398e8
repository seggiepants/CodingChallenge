package com.segludian.digitaltennis;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.Rectangle;

public class Player {
	// score: The player's current score.
	// x: The X Coordinate of the top left of the player's racket.
	// y: The Y Coordinate of the top left of the player's racket.
	// homeX: The X Coordinate the player should start at.
	// homeY: The Y Coordinate the player should start at.
	// width: The width of the player's racket.
	// height: The height of the player's racket.
	// Rectangle: Used for collision detection.
	private int score;
	private double x, y;
	private double homeX, homeY;
	private Rectangle rectangle;
	private Controller controller;
	private final static int width = 8;
	private final static int height = 32;
	private final Color racketColor = Color.white;
	
	/**
	 * Constructor
	 * @param controller: Controller class that updates the player's racket position.
	 * @param x: default x-coordinate of the top left of the player's racket.
	 * @param y: default y-coordinate of the top right of the player's racket.
	 * @param width: width of the screen.
	 * @param height: height of the screen.
	 */
	public Player(Controller controller, double x, double y, int width, int height) {
		this.controller = controller;
		this.setHome(x, y, width, height);
		this.rectangle.width = Player.width;	// These don't change so don't bother updating them.
		this.rectangle.height = Player.height;
		newGame();
	}
	
	// Getters and Setters:
	/**
	 * 
	 * @return: The current score for this player.
	 */
	public int getScore() {
		return score;
	}
	
	public Rectangle getRectangle() {
		this.rectangle.x = (int) this.x; // Update with the current position.
		this.rectangle.y = (int) this.y;
		return this.rectangle;
	}
	
	/**
	 * 
	 * @return: Paddle Width
	 */
	public static int getWidth() {
		return Player.width;
	}
	
	/**
	 * 
	 * @return: Paddle Height
	 */
	public static int getHeight() {
		return Player.height;
	}
	
	/**
	 * Called when we start a new game.
	 */
	public void newGame()
	{
		this.x = this.homeX;
		this.y = this.homeY;
		this.score = 0;
	}
	
	/**
	 * Called when the player gets a point.
	 */
	public void addPoint()
	{
		this.score++;
	}
	
	public void setHome(double x, double y, int width, int height) {
		this.homeX = x - (this.width / 2);
		this.homeY = y - (this.height / 2);
		
		if (this.x < 0 || this.x + this.width >= width) {
			this.x = this.homeX;
		}
		
		if (this.y < 0 || this.y + this.height >= height) {
			this.y = this.homeY;
		}
		
	}
	
	/**
	 * Draw the player's racket.
	 *
	 */
	public void draw(Graphics g) {
		g.setColor(this.racketColor);
		g.fillRect((int) this.x,  (int)this.y,  Player.width,  Player.height);
		
	}
	
	/**
	 * Update the player's racket position.
	 * @param dt : Number of milliseconds elapsed for the previous frame.
	 */
	public void update(double dt) {
		// Pass it off to the controller to handle.
		this.controller.update(this,  dt);
	}
	
	public boolean isHuman() {
		return this.controller.isHuman();
	}
}
